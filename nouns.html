<!DOCTYPE html>
<html lang=ru>
<head>
<meta charset=utf-8>
<meta name=viewport content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'>
<title>Существительные</title>
<style>
th {
	font-size: 2rem;
}
td :link,
td :visited {
	color: black;
	text-decoration: none;
}
td :link:hover {
	text-decoration: underline;
}
.ending {
	color: green;
}
</style>
</head>
<body>
<h1>Существительные, изменения по родам и числам</h1>
<div id=nouns-container></div>
<script>
const $container=document.getElementById('nouns-container')
$container.innerHTML=''
writeTable($container)

function writeTable($container) {
	const $table=document.createElement('table')
	writeHeader($table)
	writeUsual($table)
	$container.append($table)
}

function writeHeader($table) {
	const $row=$table.insertRow()
	writeNumberCols(`♂`,`мужской род`)
	$row.insertCell()
	writeNumberCols(`♀`,`женский род`)
	function writeNumberCols(genderSymbol,genderTitle) {
		for (const [number,numberTitle] of [
			[1,`единственное число`],
			[2,`множественное число`],
		]) {
			const $cell=document.createElement('th')
			const $genderAndNumber=document.createElement('span')
			$genderAndNumber.innerText=genderSymbol.repeat(number)
			$genderAndNumber.title=`${genderTitle}, ${numberTitle}`
			$cell.append($genderAndNumber)
			$row.append($cell)
		}
	}
}

function writeUsual($table) {
	writeExplanation($table,`обычные окончания и изменения по родам/числам`)
	writeWordQuartetRow($table,"ragazz","o","i","a","e")
	writeWordPairsRow($table,"libr","cas","o","i","a","e")
	writeWordQuartetRow($table,"nipot","e","i","e","i")
	writeWordPairsRow($table,"can","chiav","e","i","e","i")
}

function writeExplanation($table,text) {
	const $row=$table.insertRow()
	const $cell=$row.insertCell()
	$cell.colSpan=4
	$cell.innerText=text
}

function writeWordQuartetRow($table,wordStem,wordEndingM,wordEndingMM,wordEndingF,wordEndingFF) {
	const $row=$table.insertRow()
	writeWordQuartet($row,wordStem,wordEndingM,wordEndingMM,wordEndingF,wordEndingFF)
}

function writeWordPairsRow($table,wordStemM,wordStemF,wordEndingM,wordEndingMM,wordEndingF,wordEndingFF) {
	const $row=$table.insertRow()
	writeWordPair($row,wordStemM,wordEndingM,wordEndingMM)
	writeGap($row)
	writeWordPair($row,wordStemF,wordEndingF,wordEndingFF)
}

function writeWordQuartet($row,wordStem,wordEndingM,wordEndingMM,wordEndingF,wordEndingFF) {
	writeWordPair($row,wordStem,wordEndingM,wordEndingMM)
	const $cell=$row.insertCell()
	$cell.innerText="⟷"
	writeWordPair($row,wordStem,wordEndingF,wordEndingFF)
}

function writeWordPair($row,wordStem,wordEndingSingular,wordEndingPlural) {
	writeWord($row,wordStem,wordEndingSingular)
	writeWord($row,wordStem,wordEndingPlural)
}

function writeWord($row,wordStem,wordEnding) {
	const $cell=$row.insertCell()
	const $word=document.createElement('a')
	const word=wordStem+wordEnding
	$word.href=`https://it.wiktionary.org/wiki/${word}`
	const $stem=document.createElement('span')
	$stem.classList.add('stem')
	$stem.innerText=wordStem
	const $ending=document.createElement('span')
	$ending.classList.add('ending')
	$ending.innerText=wordEnding
	$word.append($stem,$ending)
	$cell.append($word)
}

function writeGap($row) {
	const $cell=$row.insertCell()
}
</script>
</body>
</html>
