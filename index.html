<!DOCTYPE html>
<html lang='es'>
<head>
<meta charset='utf-8' />
<style>
body {
	font-family: sans-serif;
}
table {
	border-collapse: collapse;
}
tbody {
	border-top: solid 1px gray;
}
td, th {
	text-align: left;
	padding: .1em .2em;
	font-weight: normal;
}
td {
	white-space: nowrap;
}
th.group {
	min-width: 1em;
}
th.group span {
	writing-mode: vertical-rl;
	transform: rotate(180deg);
}
td[title], th[title] {
	text-decoration: underline dotted;
}
[class|=stem] {
	border-right: solid 1px green;
	padding: .15em .05em .15em 0;
}
[class|=end] {
	font-weight: bold;
	border-left: solid 1px green;
	padding: .15em 0 .15em .05em;
}
[class|=subend] {
	color: #333;
	font-weight: bold;
	border-left: solid 1px #DDD;
	padding: .15em 0 .15em .05em;
}
[class|=stem] + [class|=end] {
	border: none;
}
.stem-2, .end-2 {
	border-color: red;
}
.stem-1 em, .end-1 em {
	color: green;
	font-style: normal;
}
.stem-2 em, .end-2 em {
	color: red;
	font-style: normal;
}
.stem-1 em:empty, .end-1 em:empty, .stem-2 em:empty, .end-2 em:empty {
	display: inline-block;
	width: .5ex;
}
.stem-1 em:empty, .end-1 em:empty {
	border-bottom: solid 1px green;
}
.stem-2 em:empty, .end-2 em:empty {
	border-bottom: solid 1px red;
}
</style>
</head>
<body>
<script>
const verbFormGroups=[
	['',['inf','ger','par']],
	['Presente',['pres1s','pres2s','pres3s','pres1p','pres2p','pres3p']],
	['Pretérito',['pret1s','pret2s','pret3s','pret1p','pret2p','pret3p']],
	['<abbr title=Pretérito>Pr.</abbr> imperfecto',['imp1s','imp2s','imp3s','imp1p','imp2p','imp3p']],
	['Imperativo',['im2s','im2vs','im1p','im2p','im2vp']],
]
const verbForms={
	inf: ['Infinitivo','инфинитив'],
	ger: ['Gerundio','для образования аналога continuous в английском по схеме спряжённый-estar + Ger. ("estoy estudiando" = "I am studying")'],
	par: ['Participio','страдательное(?) причастие прошедшего времени, меняется по родам и числам (apagado = выключенный, apagada = выключенная)'],
	pres1s: ['yo','1-е лицо единственного числа'],
	pres2s: ['tú','2-е лицо единственного числа'],
	pres3s: ['él','3-е лицо единственного числа (él, ella); вежливое вы единственного числа (usted)'],
	pres1p: ['nosotros','1-е лицо множественного числа (nosotros, nosotras)'],
	pres2p: ['vosotros','2-е лицо множественного числа (vosotros, vosotras)'],
	pres3p: ['ellos','3-е лицо множественного числа (ellos, ellas); вежливое вы множественного числа (ustedes)'],
	pret1s: ['yo','1-е лицо единственного числа'],
	pret2s: ['tú','2-е лицо единственного числа'],
	pret3s: ['él','3-е лицо единственного числа (él, ella); вежливое вы единственного числа (usted)'],
	pret1p: ['nosotros','1-е лицо множественного числа (nosotros, nosotras)'],
	pret2p: ['vosotros','2-е лицо множественного числа (vosotros, vosotras)'],
	pret3p: ['ellos','3-е лицо множественного числа (ellos, ellas); вежливое вы множественного числа (ustedes)'],
	imp1s: ['yo','1-е лицо единственного числа'],
	imp2s: ['tú','2-е лицо единственного числа'],
	imp3s: ['él','3-е лицо единственного числа (él, ella); вежливое вы единственного числа (usted)'],
	imp1p: ['nosotros','1-е лицо множественного числа (nosotros, nosotras)'],
	imp2p: ['vosotros','2-е лицо множественного числа (vosotros, vosotras)'],
	imp3p: ['ellos','3-е лицо множественного числа (ellos, ellas); вежливое вы множественного числа (ustedes)'],
	im2s: ['tú','2-е лицо единственного числа; форма глагола обычно совпадает с 3-м лицом ед. ч. Presente'],
	im2vs: ['usted','вежливое вы единственного числа; форма глагола обычно совпадает императивом для tú, только окончание a меняется на e и наоборот'],
	im1p: ['nosotros','1-е лицо множественного числа (nosotros, nosotras)'],
	im2p: ['vosotros','2-е лицо множественного числа (vosotros, vosotras)'],
	im2vp: ['ustedes','вежливое вы множественного числа'],
}
const v1=(...aa)=>{
	const a=[].concat.apply([],aa.map(s=>Array.isArray(s)?[s]:s.split(',')))
	return [
		'inf','ger','par',
		'pres1s','pres2s','pres3s','pres1p','pres2p','pres3p',
		'pret1s','pret2s','pret3s','pret1p','pret2p','pret3p',
		'imp1s','imp2s','imp3s','imp1p','imp2p','imp3p',
		'im2s','im2vs','im1p','im2p','im2vp'
	].reduce((o,k,i)=>({...o,[k]:a[i]}),{})
}
const v1forms=(inf,ar,er,ir)=>{
	const [stem,end]=inf.split(/(..)$/)
	const gen=a=>a.split(',').map(s=>`${stem}|${s}`).join(',')
	if (end=='ar') {
		return gen(ar)
	} else if (end=='er') {
		return gen(er)
	} else if (end=='ir') {
		return gen(ir)
	}
	throw 'unrecognized verb form'
}
const v1pres=(inf)=>v1forms(inf,
	'o,as,a,amos,áis,an',
	'o,es,e,emos,éis,en',
	'o,es,e,imos,ís,en',
)
const v1pret=(inf)=>v1forms(inf,
	'é,aste,ó,amos,asteis,aron',
	'í,iste,ió,imos,isteis,ieron',
	'í,iste,ió,imos,isteis,ieron',
)
const v1imp=(inf)=>v1forms(inf,
	'ab|a,ab|as,ab|a,áb|amos,ab|ais,ab|an',
	'í|a,í|as,í|a,í|amos,í|ais,í|an',
	'í|a,í|as,í|a,í|amos,í|ais,í|an',
)
const v1yendo=(stem)=>[`${stem}|[y]endo`,'после гласной -iendo меняется на -yendo']
const v1jo=(stem)=>[`${stem.slice(0,-1)}[j]|o`,'у -ger и -gir-глаголов вместо -go пишется -jo']
const verbs=[
	['hablar',v1(
		'habl|ar,habl|ando,habl|ado',
		v1pres('hablar'),v1pret('hablar'),v1imp('hablar'),
		'habl|a,habl|e,habl|emos,habl|ad,habl|en',
	),'говорить'],
	['comer',v1(
		'com|er,com|iendo,com|ido',
		v1pres('comer'),v1pret('comer'),v1imp('comer'),
		'com|e,com|a,com|amos,com|ed,com|an',
	),'есть'],
	['vivir',v1(
		'viv|ir,viv|iendo,viv|ido',
		v1pres('vivir'),v1pret('vivir'),v1imp('vivir'),
		'viv|e,viv|a,viv|amos,viv|id,viv|an',
	),'жить'],
	['estar',v1(
		'est|ar,est|ando,est|ado',
		'est|o[y],est|[á]s,est|[á],est|amos,est|áis,est|[á]n',
		'estuv#[e],estuv#iste,estuv#[o],estuv#imos,estuv#isteis,estuv#ieron',
		v1imp('estar'),
		'est|[á],est|[é],est|emos,est|ad,est|[é]n',
	),['быть','быть временно, быть в указанном месте']],
	['ser',v1(
		's|er,s|iendo,s|ido',
		's|o[y],er#es,e[s]#,s|[o]mos,s|[o]is,s|[o]n',
		'fu#[i],fu#iste,fu#[e],fu#imos,fu#isteis,fu#eron',
		'er#[]#a,er#[]#as,er#[]#a,[é]r#[]#amos,er#[]#ais,er#[]#an',
		's|[é],s[e]|a,s[e]|amos,s|ed,s[e]|an',
	),['быть','быть постоянно, быть в указанный момент времени']],
	['ir',v1(
		'#ir,#[y]endo,#ido',
		'v|o[y],v|as,v|a,v|amos,v|[a]is,v|an',
		'fu#[i],fu#iste,fu#[e],fu#imos,fu#isteis,fu#eron',
		'ib#[]#a,ib#[]#as,ib#[]#a,[í]b#[]#amos,ib#[]#ais,ib#[]#an',
		'v|e,v[ay]|a,v[ay]|amos,#id,v[ay]|an',
	),'идти'],
	['dar',v1(
		'd|ar,d|ando,d|ado',
		'd|o[y],d|as,d|a,d|amos,d|[a]is,d|an',
		'd|[i],d|[i]ste,d|[io],d|[i]mos,d|[i]steis,d|[ie]ron',
		v1imp('dar'),
		'd|a,d|[é],d|emos,d|ad,d|en',
	),'давать'],
	['leer',v1(
		'le|er',v1yendo('le'),'le|[í]do',
		v1pres('leer'),
		'le|í,le|[í]ste,le|[y]ó,le|[í]mos,le|[í]steis,le|[y]eron',
		v1imp('leer'),
		'le|e,le|a,le|amos,le|ed,le|an',
	),'читать'],
	['ver',v1(
		'v|er,v|iendo,v|i[st]o',
		'v[e]|o,v|es,v|e,v|emos,v|[e]is,v|en',
		'v|[i],v|iste,v|i[o],v|imos,v|isteis,v|ieron',
		v1imp('v[e]er'),
		'v|e,v[e]|a,v[e]|amos,v|ed,v[e]|an',
	),'видеть'],
	['venir',v1(
		'ven|ir,v[i]n|iendo,ven|ido',
		'ven[g]|o,v[i]en|es,v[i]en|e,ven|imos,ven|ís,v[i]en|en',
		'v[i]n|[e],v[i]n|iste,v[i]n|[o],v[i]n|imos,v[i]n|isteis,v[i]n|ieron',
		v1imp('venir'),
		'ven|[],ven[g]|a,ven[g]|amos,ven|id,ven[g]|an',
	),'приходить'],
	['hacer',v1(
		'hac|er,hac|iendo,h[e]|[ch]o',
		'ha[g]|o,hac|es,hac|e,hac|emos,hac|éis,hac|en',
		'h[i]c|[e],h[i]c|iste,h[iz]|[o],h[i]c|imos,h[i]c|isteis,h[i]c|ieron',
		v1imp('hacer'),
		'ha[z]|[],ha[g]|a,ha[g]|amos,hac|ed,ha[g]|an',
	),'делать'],
	['poner',v1(
		'pon|er,pon|iendo,pu[e]s#[t]o',
		'pon[g]|o,pon|es,pon|e,pon|emos,pon|éis,pon|en',
		'pus#[e],pus#iste,pus#[o],pus#imos,pus#isteis,pus#ieron',
		v1imp('poner'),
		'pon|[],pon[g]|a,pon[g]|amos,pon|ed,pon[g]|an',
	),'ставить'],
	['tener',v1(
		'ten|er,ten|iendo,ten|ido',
		'ten[g]|o,t[i]en|es,t[i]en|e,ten|emos,ten|éis,t[i]en|en',
		'tuv#[e],tuv#iste,tuv#[o],tuv#imos,tuv#isteis,tuv#ieron',
		v1imp('tener'),
		'ten|[],ten[g]|a,ten[g]|amos,ten|ed,ten[g]|an',
	),'иметь'],
	['saber',v1(
		'sab|er,sab|iendo,sab|ido',
		's#[é],sab|es,sab|e,sab|emos,sab|éis,sab|en',
		'sup#[e],sup#iste,sup#[o],sup#imos,sup#isteis,sup#ieron',
		v1imp('saber'),
		'sab|e,sep#a,sep#amos,sab|ed,sep#an',
	),['знать','знать факт/навык']],
	['conocer',v1(
		'conoc|er,conoc|iendo,conoc|ido',
		'cono[z]c|o,conoc|es,conoc|e,conoc|emos,conoc|éis,conoc|en',
		v1pret('conocer'),v1imp('conocer'),
		'conoc|e,cono[z]c|a,cono[z]c|amos,conoc|ed,cono[z]c|an',
	),['знать','знать человека/место']],
	['traer',v1(
		'tra|er',v1yendo('tra'),'tra|ído',
		'tra[ig]|o,tra|es,tra|e,tra|emos,tra|éis,tra|en',
		'traj#[e],traj#iste,traj#[o],traj#imos,traj#isteis,traj#[]eron',
		v1imp('traer'),
		'tra|e,tra[ig]|a,tra[ig]|amos,tra|ed,tra[ig]|an',
	),'приносить'],
	['coger',v1( // considered regular
		'cog|er,cog|iendo,cog|ido',
		v1jo('cog'),'cog|es,cog|e,cog|emos,cog|éis,cog|en',
		v1pret('coger'),v1imp('coger'),
		'cog|e,co[j]|a,co[j]|amos,cog|ed,co[j]|an',
	),'брать'],
]
const $body=document.getElementsByTagName('body')[0]
const $table=document.createElement('table')
const $thead=document.createElement('thead')
$table.appendChild($thead)
$thead.insertRow().innerHTML="<th colspan=2><th><abbr title='Primera conjugación'>1ª conj.</abbr><th><abbr title='Segunda conjugación'>2ª conj.</abbr><th><abbr title='Tercera conjugación'>3ª conj.</abbr>"
const readPair=(a)=>Array.isArray(a)?a:[a,'']
for (const [formGroupName,formGroupMembers] of verbFormGroups) {
	const $tbody=document.createElement('tbody')
	$table.appendChild($tbody)
	let firstInGroup=true
	for (formId of formGroupMembers) {
		const $row=$tbody.insertRow()
		if (firstInGroup && formGroupName) {
			const $formGroupCell=document.createElement('th')
			$row.appendChild($formGroupCell)
			$formGroupCell.innerHTML='<span>'+formGroupName+'</span>'
			$formGroupCell.classList.add('group')
			$formGroupCell.setAttribute('rowspan',formGroupMembers.length)
		}
		firstInGroup=false
		const [formText,formNote]=verbForms[formId]
		const $formCell=document.createElement('th')
		if (!formGroupName) $formCell.setAttribute('colspan',2)
		$row.appendChild($formCell)
		$formCell.innerHTML=formText
		$formCell.setAttribute('title',formNote)
		for (const [verb,forms] of verbs) {
			const [form,formNote]=readPair(forms[formId])
			const $cell=$row.insertCell()
			if (!forms[formId]) continue
			let variant=1
			let [stem,end,subend]=form.split('|')
			if (end===undefined) {
				variant=2
				;[stem,end,subend]=form.split('#')
			}
			const mark=(s)=>s.replace(/\[(.*)\]/,'<em>$1</em>')
			const makeSpan=(cls,s)=>s?`<span class=${cls}-${variant}>${mark(s)}</span>`:''
			let t=makeSpan('stem',stem)+makeSpan('end',end)
			if (subend!==undefined) t+=makeSpan('subend',subend)
			$cell.innerHTML=t
			if (formNote) $cell.setAttribute('title',formNote)
		}
	}
}
{
	const $tbody=document.createElement('tbody')
	$table.appendChild($tbody)
	{
		const $row=$tbody.insertRow()
		$row.setAttribute('lang','ru')
		const $cell=document.createElement('th')
		$cell.setAttribute('colspan',2)
		$row.appendChild($cell)
		for (const [verb,forms,translationData] of verbs) {
			const [translation,translationNote]=readPair(translationData)
			const $cell=$row.insertCell()
			$cell.innerHTML=translation
			if (translationNote) $cell.setAttribute('title',translationNote)
		}
	}
	{
		const $row=$tbody.insertRow()
		const $cell=document.createElement('th')
		$cell.setAttribute('colspan',2)
		$row.appendChild($cell)
		for (const [verb] of verbs) {
			$row.insertCell().innerHTML="<a href=https://es.wiktionary.org/wiki/"+verb+"#Conjugaci%C3%B3n>[w]</a>"
		}
	}
}
$body.appendChild($table)
</script>
</body>
</html>
